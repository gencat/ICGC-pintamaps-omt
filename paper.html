<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>P I N T A M A P S</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<link rel="stylesheet" href="css/vendors/bootstrap.min.css">
<link rel="stylesheet" href="css/vendors/bootstrap-select.min.css">
<link rel="stylesheet" href="css/vendors/dropzone.min.css">
<link rel="stylesheet" href="css/vendors/bootstrap-colorpicker.min.css">
<link href='css/vendors/mapbox-gl.css' rel='stylesheet' />
 
 <link href="http://allfont.net/allfont.css?fonts=open-sans,roboto-regular,merriweather,komika-hand" rel="stylesheet" type="text/css" />
 
<!--
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.1/mapbox-gl.css' rel='stylesheet' />
-->

<link rel="stylesheet" href="css/pintamaps.css">
<script src="js/vendors/jquery-2.1.4.min.js"></script>
<script src="js/vendors/bootstrap.min.js"></script>
<script src="js/vendors/bootstrap-colorpicker.min.js"></script>
<script src="js/vendors/bootstrap-select.min.js"></script>
<script src="js/vendors/dropzone.min.js"></script>
<script src="js/vendors/url.min.js"></script>
<script src="js/instamaps.geolocal.selectMunicipis.js"></script>
<script src="js/vendors/chroma.min.js"></script>
<script src="styles/style_icgc_matriu_pencil.json"></script>
<!--
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.1/mapbox-gl.js'></script>
-->
  
<script src='js/vendors/mapbox-gl.js'></script>



<style>

</style>
</head>
<body>
	<div style="display:none" id="llegenda"> 

		<div class="cap_ll">
			<div class="titol"><b>Editor d'estils</b></div>
			
 		
			<div class="mapboxgl-ctrl-group" style="float:right;font-size:small">
			<button id="bt_random"  title="Colors aleatoris"  class="mapboxgl-ctrl-icon glyphicon glyphicon-random"></button></div>
	
		</div>
		<br>
	<div class="btn-group extraBT">
		  <button class="btn btn-default btn-xs dropdown-toggle extraBT2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		   Fons mapa <span class="caret"></span>
		  </button>
		  <ul id="ul_fonsmap" class="dropdown-menu">
		  	 <li id="li_color"><a href="#">Color</a></li>
		  	 <li  id="li_textura"><a href="#">Textura</a></li>
		  </ul>
	</div>
		
		<div class="btn-group">
			
			<div id="c_fons" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			
			<div  id="t_fons">
				<div title="Textura neu" id="neu" class="div_estil_1"></div>
				<div title="Textura plata" id="plata" class="div_estil_2"></div>
				<div title="Textura metall fosc" id="metallfosc" class="div_estil_3"></div>
				<div title="Textura paper vell" id="papervell" class="div_estil_4"></div>
				<div title="Textura herba" id="green" class="div_estil_5"></div>
				<div title="Textura cel" id="blaucel" class="div_estil_6"></div>
			</div>
			
			
			
		</div>
		<br>
		<div class="btn-group">
			<div>Edificacions</div>
			<div id="c_edi" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			
		</div>
		<br>
		<div class="btn-group">
			<div>Illes de cases</div>
			<div id="c_illes" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
		
		</div>
		<br>
		<div class="btn-group">
			<div>Polígons urbans</div>
			<div id="c_polurbans" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
		
		</div>
		<br>
		<div class="btn-group">
			<div>Carreteres</div>
			<div id="c_car" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			
		</div>
		<br>
		<div class="btn-group">
			<div>Carrers</div>
			<div id="c_carrers" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			
		</div>
		<br>
		<div class="btn-group">
			<div>Camins i corriols</div>
			<div id="c_camins" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
		
		</div>
		<br>
		<div class="btn-group">
			<div>Ferrocarrils</div>
			<div id="c_ferrocarrils" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
		
		</div>
		<br>
		<div class="btn-group">
			<div>Vegetació</div>
			<div id="c_bos" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			<!-- <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><div id="c_bos" class="bq_bos"></div> </a> -->
		</div>
		<br>
		<div class="btn-group">
			<div>Rocam</div>
			<div id="c_rocam" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			<!-- <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><div id="c_rocam" class="bq_rocam"></div> </a> -->
		</div>
		<br>
		<div class="btn-group">
			<div>Platges</div>
			<div id="c_platges" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			<!-- <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><div id="c_platges" class="bq_platges"></div> </a> -->
		</div>
		<br>
		<div class="btn-group">
			<div>Rius</div>
			<div id="c_rius" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			<!-- <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><div id="c_rius" class="bq_rius"></div> </a> -->
		</div>
		<br>
		<div class="btn-group">
			<div>Masses d'aigua</div>
			<div id="c_aigues" class="input-group">
				<input type="text" value="" class="form-control" /> <span
					class="input-group-addon"><i></i></span>
			</div>
			
		</div>
		<br>
		
		<div  id="div_topo" class="btn-group extraBT">
		  <button class="btn btn-default btn-xs dropdown-toggle extraBT2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		   Toponímia <span class="caret"></span>
		  </button>
		  <ul id="ul_topomap" class="dropdown-menu">
		  	 <li id="li_Open Sans"><a style="font-family: 'Open Sans', arial;" href="#">Font: Open Sans</a></li>
		  	 
		  	 <li id="li_Merriweather"><a style="font-family: 'Merriweather', arial;" href="#">Font: Merriweather</a></li>
		  	 
		  	  <li id="li_Komika Hand"><a style="font-family: 'Komika Hand', arial;" href="#">Font: Komika Hand</a></li>
		  </ul>
		  <div style="float:right">
			<input type="checkbox" id="chk_toponims"  checked="true" aria-label="true">
			</div>
	</div>
		<!--
		<div  id="div_topo" class="btn-group">		
			<div style="float:left" class="input-group">Toponímia </div>
			<div style="float:right">
			<input type="checkbox" id="chk_toponims"  checked="true" aria-label="true">
			</div>
		-->	
			
</div>			
		</div>
	
	<div id='barraCerca'  class="mapboxgl-ctrl-group mapboxgl-ctrl">
	</div>
	
	<div id='barraEines' class="mapboxgl-ctrl-group mapboxgl-ctrl">
		<button id="bt_export"   title="Desar l'estil del mapa"  class="mapboxgl-ctrl-icon glyphicon glyphicon-cloud-download"></button>
		<button id="bt_import"   title="Carregar l'estil al mapa"  class="mapboxgl-ctrl-icon glyphicon glyphicon-cloud-upload"></button>	
		<button id="bt_capture"  title="Capturar mapa"  class="mapboxgl-ctrl-icon glyphicon glyphicon-camera"></button>
		<!--
		<button id="bt_publish"  title="Publicar estil" class="mapboxgl-ctrl-icon glyphicon glyphicon-heart-empty"></button>	
			
		-->
	
	</div>
	
	<div id='map'></div>
	<div id="logos">
		<a target="_blank" title="Institut Cartogràfic i Geològic de Catalunya" href="http://www.icgc.cat" class="logo_footer">
		<img height="45" src="css/img/icgc.png">
		</a>
	</div>
	<script>
	
</script>

<!--- Modals -->
<!-- Modal Export -->
<div class="modal fade" id="md_export" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h5 class="modal-title" id="myModalLabel">Desar l’estil del mapa</h5>
      </div>
      <div class="modal-body">
	  <div>Es baixarà un arxiu, en format <b>.json</b>, a la capeta de descàrregues del navegador.<br></div>
      <div class="centrat" id="div_exportar"></div>
      </div>
    </div>
  </div>
</div>


<!-- Modal Import -->
<div class="modal fade" id="md_import" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h5 class="modal-title" id="myModalLabel">Carregar l’estil al mapa</h5>
      </div>
      <div class="modal-body">
	  <div>Arrossega o clica per pujar un estil, en format <b>.json</b>, prèviament desat.</div>
      <div id="div_upload_estil" >
	 Arrossega aquí o directament sobre el mapa
	  </div>
      </div>
    </div>
  </div>
</div>


<!-- Error Modal -->
<div class="modal in" id="errorModal" tabindex="-1" role="dialog">
  <div class="modal-backdrop in" id="modal-backdrop" onclick="closeErrorModal()"></div>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" onclick="closeErrorModal()"><span>&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Error</h4>
      </div>
      <div class="modal-body">
        <p id="modal-error-text"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="closeErrorModal()">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Print -->
<div class="modal fade" id="md_print" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h5 class="modal-title" id="myModalLabel">Capturar mapa</h5>
      </div>
      <div class="modal-body">
	 
	<form onsubmit="return false;" id="config">
  <fieldset id="config-fields">
  <div class="row">
    <div class="col-sm-5">
      <div class="form-group">
        <label>Unitats</label><br>
		<label class="radio-inline">
          <input type="radio" name="unitOptions" value="mm" id="mmUnit"  checked> Mil·límetres
        </label>
        <label class="radio-inline">
          <input type="radio" name="unitOptions" value="in" id="inUnit"> Polzades
        </label>
        
      </div>
    </div>
    <div class="col-sm-5">
      <div class="form-group">
        <label>Format</label><br>
        <label class="radio-inline">
          <input type="radio" name="outputOptions" value="png" checked> PNG
        </label>
        <label class="radio-inline">
          <input type="radio" name="outputOptions" value="pdf"> PDF
        </label>
      </div>
    </div>
    
  </div>
  <div class="row">
    <div class="col-sm-4">
      <div class="form-group" id="widthGroup">
        <label for="widthInput">Amplada</label>
        <input type="text" class="form-control" id="widthInput" autocomplete="off" value="280">
      </div>
    </div>
    <div class="col-sm-4">
      <div class="form-group" id="heightGroup">
        <label for="heightInput">Alçada</label>
        <input type="text" class="form-control" id="heightInput" autocomplete="off" value="200">
      </div>
    </div>
    <div class="col-sm-4">
      <div class="form-group" id="dpiGroup">
        <label for="dpiInput">DPI</label>
        <input type="text" class="form-control" id="dpiInput" autocomplete="off" value="300">
      </div>
    </div>
  </div>
  </fieldset>
</form>
<div class="alert alert-danger" role="alert" id="error-message"></div>

<div class="row">
  <div class="col-sm-12">
    <button type="submit" class="btn btn-success" id="generate-btn">Capturar mapa</button>
    <div id="spinner"></div>
  </div>
</div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
     

	 </div>
    </div>
  </div>
</div>


<script type="text/javascript" src="js/vendors/canvas-toBlob.min.js"></script>
<script type="text/javascript" src="js/vendors/FileSaver.min.js"></script>
<script type="text/javascript" src="js/vendors/jspdf.min.js"></script>
<script src='js/pintamaps.js'></script>
<script src="/betaserver.google-analytics.js"></script>  
</body>
</html>