<!DOCTYPE html>
<html>
  <head>
    <title>edificis3dmil</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.1/mapbox-gl.css' rel='stylesheet' />
    <style>
      html, body, #map {width:100%; height:100%; margin:0; padding:0;}
      body {background: #000;}
      #map {position:absolute;top:0;left:0;right:200px;bottom:0;}
      #layerList {position:absolute;top:5px;right:0;bottom:50%;width:190px;overflow:auto;}
      #layerList div {color:#ccc;}
      #layerList div div {width:15px;height:15px;display:inline-block;}
      #propertyList {position:absolute;top:50%;bottom:0;right:0;width:190px;overflow:auto;color:#fff;}
      .mapboxgl-control-container div {z-index: 100;}
    </style>
  </head>
  <body>
    <div id="map"></div>
    <div id="layerList"></div>
    <pre id="propertyList"></pre>
  <script>

mapboxgl.accessToken = 'NOT-REQUIRED-WITH-YOUR-VECTOR-TILES-DATA';
var map = new mapboxgl.Map({
  container: 'map',
  center: [2.0517,41.6175],
  zoom: 8
});
map.addControl(new mapboxgl.Navigation());
var setCenterFromLayer = true;

function generateColor(str) {
  var rgb = [0, 0, 0];
  for (var i = 0; i < str.length; i++) {
      var v = str.charCodeAt(i);
      rgb[v % 3] = (rgb[i % 3] + (13*(v%13))) % 12;
  }
  var r = 4 + rgb[0];
  var g = 4 + rgb[1];
  var b = 4 + rgb[2];
  r = (r * 16) + r;
  g = (g * 16) + g;
  b = (b * 16) + b;
  return [r,g,b,1];
};
function initLayer(data) {
  var layer;
  var layerList = document.getElementById('layerList');
  var layers_ = [];
  data['vector_layers'].forEach(function(el) {
    var color = generateColor(el['id']);
    var colorText = 'rgba(' + color[0] + ',' + color[1] + ',' + color[2] + ',' + color[3] + ')';
    layers_.push({
      id: el['id'] + Math.random(),
      source: 'vector_layer_',
      'source-layer': el['id'],
      interactive: true,
      type: 'line',
      paint: {'line-color': colorText}
    });
    var item = document.createElement('div');
    item.innerHTML = '<div style="' +
      'background:rgba(' + color[0] + ',' + color[1] + ',' + color[2] + ',1);' +
      '"></div> ' + el['id'];
    layerList.appendChild(item);
  });
  map.setStyle({
    version: 8,
    sources: {
      'vector_layer_': {
        type: 'vector',
        tiles: data['tiles'],
        minzoom: data['minzoom'],
        maxzoom: data['maxzoom']
      }
    },
    layers: layers_
  });
  if (setCenterFromLayer) {
    var center = data['center'];
    if (typeof center == 'string') {
      center = center.split(',');
    }
    map.setCenter([parseFloat(center[0]), parseFloat(center[1])]);
    map.setZoom(parseInt(center[2], 10));
  }
  return layer;
}

var propertyList = document.getElementById('propertyList');
map.on('mousemove', function(e) {
  propertyList.innerHTML = '';
  map.featuresAt(e.point, {radius: 3}, function(err, features) {
    if (err) throw err;
    if (features[0]) {
      propertyList.innerHTML = JSON.stringify(features[0].properties, null, 2);
    }
  });
});

var tileJSON = {"attribution":"icgc","center":[2.0517,41.6175,8],"description":"edificis 3d del mil","format":"pbf","maxzoom":16,"minzoom":8,"name":"edificis3dmil","bounds":[0.2691650390625,41.064100828659,3.2080078125,42.573630703361],"basename":"edifics3dmil","profile":"mercator","scale":1,"tiles":["http://172.70.1.31/tileserver3/tileserver.php?%2Findex.json&callback=_callbacks_._0iufi8sf4?/edifics3dmil/{z}/{x}/{y}.pbf"],"tilejson":"2.0.0","scheme":"xyz","grids":["http://172.70.1.31/tileserver3/tileserver.php?%2Findex.json&callback=_callbacks_._0iufi8sf4?/edifics3dmil/{z}/{x}/{y}.grid.json"],"vector_layers":[{"id":"edificis","description":"edificis_3d_mil","fields":{"ogc_fid":"Number","name":"String","descriptio":"String","elev_lidar":"Number","elev_dem":"Number","elevation":"Number"}}],"zoom":12,"tileUrl":"http://172.70.1.31/tileserver3/tileserver.php?%252Findex.json&callback=_callbacks_._0iufi8sf4?/edifics3dmil/8/129/95.pbf"};
initLayer(tileJSON);

    </script>
  </body>
</html>
Welcome to Maps hosted with TileServer-php v2.0
This server distributes maps to desktop, web, and mobile applications.

The mapping data are available as OpenGIS Web Map Tiling Service (OGC WMTS), OSGEO Tile Map Service (TMS), and popular XYZ urls described with TileJSON metadata.

edificis3dmil
norm2x2